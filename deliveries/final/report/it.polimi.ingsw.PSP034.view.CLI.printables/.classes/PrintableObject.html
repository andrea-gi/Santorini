


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="htmlId">
<head>
  <title>Coverage Report :: PrintableObject</title>
  <style type="text/css">
    @import "../../.css/coverage.css";
  </style>
</head>

<body>
<div class="header"></div>

<div class="content">
<div class="breadCrumbs">
    [ <a href="../../index.html">all classes</a> ]
    [ <a href="../index.html">it.polimi.ingsw.PSP034.view.CLI.printables</a> ]
</div>

<h1>Coverage Summary for Class: PrintableObject (it.polimi.ingsw.PSP034.view.CLI.printables)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">PrintableObject</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 40)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<div class="sourceCode"><i>1</i>&nbsp;package it.polimi.ingsw.PSP034.view.CLI.printables;
<i>2</i>&nbsp;
<i>3</i>&nbsp;import it.polimi.ingsw.PSP034.view.CLI.printables.arrangements.Arrangement;
<i>4</i>&nbsp;
<i>5</i>&nbsp;/**
<i>6</i>&nbsp; * The PrintableObject class creates and handles objects that can be printed in a console. A printable object
<i>7</i>&nbsp; * is made of a certain number o lines each represented by a string. The line share the same starting column but can be of different
<i>8</i>&nbsp; * length. the printable object has the same width as it&#39;s longest line length.
<i>9</i>&nbsp; */
<i>10</i>&nbsp;public class PrintableObject{
<i>11</i>&nbsp;    private int startLine, startColumn;
<i>12</i>&nbsp;    private int width, height;
<i>13</i>&nbsp;    private String[] object;
<i>14</i>&nbsp;    private boolean visible;
<i>15</i>&nbsp;    private Arrangement parent;
<i>16</i>&nbsp;
<i>17</i>&nbsp;    /**
<i>18</i>&nbsp;     * A PrintableObject is initialized with invalid values for it&#39;s coordinates (set to -1) and with no width nor height (set to 0).
<i>19</i>&nbsp;     */
<b class="nc"><i>20</i>&nbsp;    public PrintableObject(){</b>
<b class="nc"><i>21</i>&nbsp;        startLine = -1;</b>
<b class="nc"><i>22</i>&nbsp;        startColumn = -1;</b>
<b class="nc"><i>23</i>&nbsp;        width = 0;</b>
<b class="nc"><i>24</i>&nbsp;        height = 0;</b>
<b class="nc"><i>25</i>&nbsp;        visible = true;</b>
<i>26</i>&nbsp;    }
<i>27</i>&nbsp;
<i>28</i>&nbsp;    /**
<i>29</i>&nbsp;     * Sets the number of lines the object is made of. The function must be invoked every time the number of line changes.
<i>30</i>&nbsp;     * @param size Number of lines the object is made of.
<i>31</i>&nbsp;     */
<i>32</i>&nbsp;    public void setObjectSize(int size){
<b class="nc"><i>33</i>&nbsp;        object = new String[size];</b>
<b class="nc"><i>34</i>&nbsp;        height = size;</b>
<i>35</i>&nbsp;    }
<i>36</i>&nbsp;
<i>37</i>&nbsp;    /**
<i>38</i>&nbsp;     * Sets a given line of the object to a given string.
<i>39</i>&nbsp;     * @param line Number of the line to be set. The value is 0-based.
<i>40</i>&nbsp;     * @param text Text to put in the given line.
<i>41</i>&nbsp;     */
<i>42</i>&nbsp;    public void setObjectLine(int line, String text) {
<i>43</i>&nbsp;        //regex to only consider the effective length of the string without the ANSI escape sequences.
<i>44</i>&nbsp;        //the first regex eliminates the extra length due to the use of \033[&lt;n&gt;D sequence followed by the text to be put inside a previous text.
<i>45</i>&nbsp;        //the second regex eliminates all the ANSI escape sequences such as colors and font setting.
<b class="nc"><i>46</i>&nbsp;        int newWidth = text.replaceAll(&quot;\033\\[[0-9;]+D.*&quot;, &quot;&quot;).replaceAll(&quot;\033\\[[0-9;]+[a-zA-Z]&quot;, &quot;&quot;).length();</b>
<b class="nc"><i>47</i>&nbsp;        object[line] = text;</b>
<b class="nc"><i>48</i>&nbsp;        if(width &lt; newWidth)</b>
<b class="nc"><i>49</i>&nbsp;            width = newWidth;</b>
<i>50</i>&nbsp;    }
<i>51</i>&nbsp;
<i>52</i>&nbsp;
<i>53</i>&nbsp;    /**
<i>54</i>&nbsp;     * Prints the object at the given coordinates.
<i>55</i>&nbsp;     * @param line line to start printing from. The value is 1-based.
<i>56</i>&nbsp;     * @param column line to start printing from.  The value is 1-based.
<i>57</i>&nbsp;     */
<i>58</i>&nbsp;    public void print(int line, int column){
<b class="nc"><i>59</i>&nbsp;        System.out.print(ANSI.reset);</b>
<i>60</i>&nbsp;
<b class="nc"><i>61</i>&nbsp;        this.startLine = line;</b>
<b class="nc"><i>62</i>&nbsp;        this.startColumn = column;</b>
<b class="nc"><i>63</i>&nbsp;        for(int i = line; i-line &lt; object.length; i++){</b>
<b class="nc"><i>64</i>&nbsp;            ANSI.moveTo(i, column);</b>
<b class="nc"><i>65</i>&nbsp;            System.out.print(object[i-line]);</b>
<i>66</i>&nbsp;        }
<i>67</i>&nbsp;    }
<i>68</i>&nbsp;
<i>69</i>&nbsp;    /**
<i>70</i>&nbsp;     * Returns the line of the top left character of the object.
<i>71</i>&nbsp;     * @return startLine if the object if it has already be printed, -1 otherwise.
<i>72</i>&nbsp;     */
<i>73</i>&nbsp;    public int getStartLine() {
<b class="nc"><i>74</i>&nbsp;        return startLine;</b>
<i>75</i>&nbsp;    }
<i>76</i>&nbsp;
<i>77</i>&nbsp;    /**
<i>78</i>&nbsp;     * Returns the column of the top left character of the object.
<i>79</i>&nbsp;     * @return startColumn if the object if it has already be printed, -1 otherwise.
<i>80</i>&nbsp;     */
<i>81</i>&nbsp;    public int getStartColumn() {
<b class="nc"><i>82</i>&nbsp;        return startColumn;</b>
<i>83</i>&nbsp;    }
<i>84</i>&nbsp;
<i>85</i>&nbsp;    /**
<i>86</i>&nbsp;     * Returns the width of the object, which is the number of columns the object is made of.
<i>87</i>&nbsp;     * @return Object width.
<i>88</i>&nbsp;     */
<i>89</i>&nbsp;    public int getWidth() {
<b class="nc"><i>90</i>&nbsp;        return width;</b>
<i>91</i>&nbsp;    }
<i>92</i>&nbsp;
<i>93</i>&nbsp;    /**
<i>94</i>&nbsp;     * Returns the Height of the object, which is the number of lines the object is made of.
<i>95</i>&nbsp;     * @return Object height.
<i>96</i>&nbsp;     */
<i>97</i>&nbsp;    public int getHeight() {
<b class="nc"><i>98</i>&nbsp;        return height;</b>
<i>99</i>&nbsp;    }
<i>100</i>&nbsp;
<i>101</i>&nbsp;    /**
<i>102</i>&nbsp;     * Returns the the object in its matrix representation.
<i>103</i>&nbsp;     * @return the object field.
<i>104</i>&nbsp;     */
<i>105</i>&nbsp;    public String[] getObject(){
<b class="nc"><i>106</i>&nbsp;        return object.clone();</b>
<i>107</i>&nbsp;    }
<i>108</i>&nbsp;
<i>109</i>&nbsp;    /**
<i>110</i>&nbsp;     * Set the object visibility. If &#39;visible&#39; is set to false, the object won&#39;t be printed or will disappear from the screen.
<i>111</i>&nbsp;     * @param visible Object visibility.
<i>112</i>&nbsp;     */
<i>113</i>&nbsp;    public void setVisible(boolean visible){
<b class="nc"><i>114</i>&nbsp;        if(this.visible != visible) {</b>
<b class="nc"><i>115</i>&nbsp;            this.visible = visible;</b>
<b class="nc"><i>116</i>&nbsp;            if(visible  &amp;&amp;  (startLine != -1  &amp;&amp;  startColumn != -1)){</b>
<b class="nc"><i>117</i>&nbsp;                print(startLine, startColumn);</b>
<b class="nc"><i>118</i>&nbsp;            }else if(startLine != -1  &amp;&amp;  startColumn != -1){</b>
<b class="nc"><i>119</i>&nbsp;                hide();</b>
<i>120</i>&nbsp;            }
<b class="nc"><i>121</i>&nbsp;            if(parent != null)</b>
<b class="nc"><i>122</i>&nbsp;                parent.updateAlignment();</b>
<i>123</i>&nbsp;        }
<i>124</i>&nbsp;    }
<i>125</i>&nbsp;
<i>126</i>&nbsp;    /**
<i>127</i>&nbsp;     * Hides the object from the screen. The area of the screen occupied by the object is cleared, but the object is still the same. If an object is printed while non visible, the stareLine and Start column fields are still updated.
<i>128</i>&nbsp;     */
<i>129</i>&nbsp;    private void hide(){
<b class="nc"><i>130</i>&nbsp;        ANSI.moveTo(startLine, startColumn);</b>
<b class="nc"><i>131</i>&nbsp;        for(int i = startLine; i-startLine &lt; object.length; i++){</b>
<b class="nc"><i>132</i>&nbsp;            ANSI.moveTo(i, startColumn);</b>
<b class="nc"><i>133</i>&nbsp;            System.out.print(new String(new char[getObject()[i-startLine].length()]).replace(&#39;\u0000&#39;, &#39; &#39;));</b>
<i>134</i>&nbsp;        }
<i>135</i>&nbsp;    }
<i>136</i>&nbsp;
<i>137</i>&nbsp;    public boolean getVisibility(){
<b class="nc"><i>138</i>&nbsp;        return visible;</b>
<i>139</i>&nbsp;    }
<i>140</i>&nbsp;
<i>141</i>&nbsp;    public void setParent(Arrangement parent) {
<b class="nc"><i>142</i>&nbsp;        this.parent = parent;</b>
<i>143</i>&nbsp;    }
<i>144</i>&nbsp;
<i>145</i>&nbsp;    public Arrangement getParent() {
<b class="nc"><i>146</i>&nbsp;        return parent;</b>
<i>147</i>&nbsp;    }
<i>148</i>&nbsp;
<i>149</i>&nbsp;    protected void setStartLine(int startLine) {
<b class="nc"><i>150</i>&nbsp;        this.startLine = startLine;</b>
<i>151</i>&nbsp;    }
<i>152</i>&nbsp;
<i>153</i>&nbsp;    protected void setStartColumn(int startColumn) {
<b class="nc"><i>154</i>&nbsp;        this.startColumn = startColumn;</b>
<i>155</i>&nbsp;    }
<i>156</i>&nbsp;}
</div>
</div>

<div class="footer">
    
    <div style="float:right;">generated on 2020-07-03 15:31</div>
</div>
</body>
</html>
